<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>formula [Documentation Center]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="public,dson_spec,object_definitions,formula,start"/>
<meta name="googlebot" content="noodp"/>
<meta name="msnbot" content="noodp"/>
<meta name="slurp" content="noodp"/>
<meta name="robots" content="noodp"/>
<meta name="msapplication-config" content="none"/>
<meta name="cse" content="1"/>
<meta name="google-site-verification" content="PcXQR7P17zEc5J0HU2PkrTC5XOKXwP4EMRizGtqUcoY"/>
<link rel="search" type="application/opensearchdescription+xml" href="http://docs.daz3d.com/lib/exe/opensearch.php" title="Documentation Center"/>
<link rel="start" href="http://docs.daz3d.com/"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="http://docs.daz3d.com/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="http://docs.daz3d.com/feed.php?mode=list&amp;ns=public:dson_spec:object_definitions:formula"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="http://docs.daz3d.com/doku.php/public/dson_spec/object_definitions/formula/start?do=export_xhtml"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="http://docs.daz3d.com/doku.php/public/dson_spec/object_definitions/formula/start?do=export_raw"/>
<link rel="canonical" href="http://docs.daz3d.com/doku.php/public/dson_spec/object_definitions/formula/start"/>
<link rel="stylesheet" type="text/css" href="http://docs.daz3d.com/lib/exe/css.php?t=dazdoccenter&amp;tseed=12f94d52787fdeb17303a81809666710"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='public:dson_spec:object_definitions:formula';var JSINFO = {"id":"public:dson_spec:object_definitions:formula:start","namespace":"public:dson_spec:object_definitions:formula","toc":{"initial_state":1},"plugin_enforcesummary":{"enforce_summary":0,"default_minoredit":0,"enforce_preview":1},"move_renameokay":false};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://docs.daz3d.com/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="http://docs.daz3d.com/lib/exe/js.php?t=dazdoccenter&amp;tseed=12f94d52787fdeb17303a81809666710&amp;template=dazdoccenter"></script>
<!--<![endif]-->
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="http://docs.daz3d.com/lib/tpl/dazdoccenter/images/favicon.ico" />
<link rel="apple-touch-icon" href="http://docs.daz3d.com/lib/tpl/dazdoccenter/images/apple-touch-icon.png" />
    <!-- <link href="http://beta.daz3d.com/skin/frontend/enterprise/daznew/groups/design-white-17359270516302b00e72474b54c8fce4.css" rel="stylesheet" type="text/css"/> -->    

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XV3EK5CW0X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XV3EK5CW0X');
</script>
</head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dazdoccenter    showSidebar hasSidebar">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="http://www.daz3d.com"  accesskey="h" title="Documentation Center"><img src="http://www.daz3d.com/skin/frontend/enterprise/daznew/images/logo/daz-logo-main.png" width="135" height="33" style="width:135px;height:33px;" /></a></h1>
        <h3><a href="http://docs.daz3d.com/doku.php/start" >Documentation Center</a></h3>
    </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="http://docs.daz3d.com/doku.php/public/dson_spec/object_definitions/formula/start?do=login&amp;sectok="  class="action login" rel="nofollow" title="Log In">Log In</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
                    <div id="dokuwiki__sitetools">
                <h3 class="a11y">Site Tools</h3>
                <form action="http://docs.daz3d.com/doku.php/start" accept-charset="utf-8" class="search" id="dw__search" method="get"><div class="no"><input type="hidden" name="do" value="googlecustomsearch" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[ALT+F]" /><input type="submit" value="Search" class="button" title="Search" /></div></form>                <div class="mobileTools">
                    <form action="http://docs.daz3d.com/doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="public:dson_spec:object_definitions:formula:start" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent Changes</option><option value="media">Media Manager</option></optgroup><optgroup label="User Tools"><option value="login">Log In</option></optgroup></select><button type="submit">&gt;</button></div></form>                </div>
                <ul>
                                    </ul>
            </div>
                
        <div id="dokuwiki__topnav">
            <bdi><a href="http://docs.daz3d.com/doku.php/public/software/install_manager/start" class="wikilink1" title="public:software:install_manager:start">Install Manager</a></bdi> | <bdi><a href="http://docs.daz3d.com/doku.php/public/software/dson_importer/start" class="wikilink1" title="public:software:dson_importer:start">DSON Importer</a></bdi><br/><bdi><a href="http://docs.daz3d.com/doku.php/public/software/dazstudio/start" class="wikilink1" title="public:software:dazstudio:start">Daz Studio</a></bdi> | <bdi><a href="http://docs.daz3d.com/doku.php/public/software/carrara/start" class="wikilink1" title="public:software:carrara:start">Carrara</a></bdi> | <bdi><a href="http://docs.daz3d.com/doku.php/public/software/hexagon/start" class="wikilink1" title="public:software:hexagon:start">Hexagon</a></bdi> | <bdi><a href="http://docs.daz3d.com/doku.php/public/software/bryce/start" class="wikilink1" title="public:software:bryce:start">Bryce</a></bdi>        </div>        
    </div>   

</div>
    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="http://docs.daz3d.com/doku.php/start" class="wikilink1" title="start">Home</a></bdi></span> » <bdi><a href="http://docs.daz3d.com/doku.php/public/start" class="wikilink1" title="public:start">Public</a></bdi> » <bdi><a href="http://docs.daz3d.com/doku.php/public/dson_spec/start" class="wikilink1" title="public:dson_spec:start">DSON File Format Specification</a></bdi> » <bdi><a href="http://docs.daz3d.com/doku.php/public/dson_spec/object_definitions/start" class="wikilink1" title="public:dson_spec:object_definitions:start">Object Definitions</a></bdi> » <bdi><span class="curid"><a href="http://docs.daz3d.com/doku.php/public/dson_spec/object_definitions/formula/start" class="wikilink1" title="public:dson_spec:object_definitions:formula:start">formula</a></span></bdi></div>
                                </div>
    
    
    <hr class="a11y" />
</div><!-- /header -->

        <div class="wrapper group">

            
                            <!-- ********** ASIDE ********** -->
                <div id="dokuwiki__aside"><div class="pad aside include group">
                    <h3 class="toggle">Sidebar</h3>
                    <div class="content">
                                                                            <!-- TOC START -->
<div id="dw__toc">
<h3>Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#formula">formula</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#description">Description</a></div></li>
<li class="level2"><div class="li"><a href="#parent_objects">Parent Objects</a></div></li>
<li class="level2"><div class="li"><a href="#properties">Properties</a></div></li>
<li class="level2"><div class="li"><a href="#details">Details</a></div></li>
<li class="level2"><div class="li"><a href="#example">Example</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->
			    <hr aria-expanded="true" style="">
                                                                        
<h2 id="dson_file_spec">DSON File Spec</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://docs.daz3d.com/doku.php/public/dson_spec/start" class="wikilink1" title="public:dson_spec:start">DSON File Format Specification</a></div>
</li>
<li class="level1 node"><div class="li"> <a href="http://docs.daz3d.com/doku.php/public/dson_spec/format_description/start" class="wikilink1" title="public:dson_spec:format_description:start">Format Description</a></div>
<ul>
<li class="level2"><div class="li"> <a href="http://docs.daz3d.com/doku.php/public/dson_spec/format_description/syntax/start" class="wikilink1" title="public:dson_spec:format_description:syntax:start">Syntax</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.daz3d.com/doku.php/public/dson_spec/format_description/data_types/start" class="wikilink1" title="public:dson_spec:format_description:data_types:start">Data Types</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.daz3d.com/doku.php/public/dson_spec/format_description/file_types/start" class="wikilink1" title="public:dson_spec:format_description:file_types:start">File Types</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.daz3d.com/doku.php/public/dson_spec/format_description/asset_management/start" class="wikilink1" title="public:dson_spec:format_description:asset_management:start">Asset Management</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.daz3d.com/doku.php/public/dson_spec/format_description/asset_addressing/start" class="wikilink1" title="public:dson_spec:format_description:asset_addressing:start">Asset Addressing</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.daz3d.com/doku.php/public/dson_spec/format_description/asset_types/start" class="wikilink1" title="public:dson_spec:format_description:asset_types:start">Asset Types</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.daz3d.com/doku.php/public/dson_spec/format_description/units_coordinate_systems/start" class="wikilink1" title="public:dson_spec:format_description:units_coordinate_systems:start">Units and Coordinate Systems</a></div>
</li>
<li class="level2 node"><div class="li"> <a href="http://docs.daz3d.com/doku.php/public/dson_spec/format_description/metadata/start" class="wikilink2" title="public:dson_spec:format_description:metadata:start" rel="nofollow">metadata</a></div>
<ul>
<li class="level3"><div class="li"> <a href="http://docs.daz3d.com/doku.php/public/dson_spec/format_description/metadata/content_types/start" class="wikilink1" title="public:dson_spec:format_description:metadata:content_types:start">Content Types</a></div>
</li>
<li class="level3"><div class="li"> <a href="http://docs.daz3d.com/doku.php/public/dson_spec/format_description/metadata/categories/start" class="wikilink1" title="public:dson_spec:format_description:metadata:categories:start">Default Categories</a></div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"> <a href="http://docs.daz3d.com/doku.php/public/dson_spec/object_definitions/start" class="wikilink1" title="public:dson_spec:object_definitions:start">Object Definitions</a></div>
</li>
</ul>

</div>
                        <div class="main_sidebar sidebar_box">
	<div class="level2">
		<hr>
		<ul>
			<li class="level1">
				<div class="li">
					<a class="urlextern" rel="nofollow" target="_blank" href="http://www.daz3d.com">DAZ 3D Home</a>
				</div>
			</li>
			<li class="level1">
				<div class="li">
					<a class="urlextern" rel="nofollow" target="_blank" href="https://helpdaz.zendesk.com/home">Knowledge Base</a>
				</div>
			</li>
			<li class="level1">
				<div class="li">
					<a class="urlextern" rel="nofollow" target="_blank" href="https://helpdaz.zendesk.com/requests/new">Contact Us</a>
				</div>
			</li>
			<li class="level1">
				<div class="li">
					<a class="urlextern" rel="nofollow" target="_blank" href="http://bugs.daz3d.com">Report A Bug</a>
				</div>
			</li>
		</ul>
	</div>
</div>                        <hr><ul><li class="level1"><div class="li"><bdi><a href="http://docs.daz3d.com/doku.php/public/terms/qr_code/start" class="wikilink1" title="public:terms:qr_code:start">QR Code</a></bdi></div><img src="https://quickchart.io/qr?text=http%3A%2F%2Fdocs.daz3d.com%2Fdoku.php%2Fpublic%2Fdson_spec%2Fobject_definitions%2Fformula%2Fstart&size=120" alt="QR Code: http://docs.daz3d.com/doku.php/public/dson_spec/object_definitions/formula/start" title="QR Code: http://docs.daz3d.com/doku.php/public/dson_spec/object_definitions/formula/start" /></li></ul>                    </div>
                </div></div><!-- /aside -->
            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <!-- <div class="pageId"><span>public:dson_spec:object_definitions:formula:start</span></div> -->

                <div class="page group">
                                                            <!-- wikipage start -->
                    
<h1 id="formula">formula</h1>
<div class="level1">

</div>

<h2 id="description">Description</h2>
<div class="level2">

<p>
Describes a set of operations and relationships to apply to a given property in the scene.
</p>

</div>

<h2 id="parent_objects">Parent Objects</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://docs.daz3d.com/doku.php/public/dson_spec/object_definitions/modifier/start" class="wikilink1" title="public:dson_spec:object_definitions:modifier:start">modifier</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://docs.daz3d.com/doku.php/public/dson_spec/object_definitions/node/start" class="wikilink1" title="public:dson_spec:object_definitions:node:start">node</a></div>
</li>
</ul>

</div>

<h2 id="properties">Properties</h2>
<div class="level2">
<div class="table sectionedit1"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Name </th><th class="col1"> Description </th><th class="col2"> Default </th><th class="col3"> Required </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> output </td><td class="col1"> A string representing the object reference of the single-valued property to be targeted with the output from the formula. </td><td class="col2"> None </td><td class="col3"> yes </td>
	</tr>
	<tr class="row2">
		<td class="col0"> operations </td><td class="col1"> An ordered array of <a href="http://docs.daz3d.com/doku.php/public/dson_spec/object_definitions/operation/start" class="wikilink1" title="public:dson_spec:object_definitions:operation:start">operation</a> objects to apply, to derive the output value. </td><td class="col2"> None </td><td class="col3"> yes </td>
	</tr>
	<tr class="row3">
		<td class="col0"> stage </td><td class="col1"> A string representing the calculation stage that this formula’s output contributes to.  May be one of “multiply” or “sum”.  See <span class="curid"><a href="http://docs.daz3d.com/doku.php/public/dson_spec/object_definitions/formula/start#details" class="wikilink1" title="public:dson_spec:object_definitions:formula:start">Details</a></span> section. </td><td class="col2"> “sum” </td><td class="col3"> no </td>
	</tr>
</table></div>

</div>

<h2 id="details">Details</h2>
<div class="level2">

<p>
The operations are given in <a href="https://en.wikipedia.org/wiki/Reverse_Polish_notation" class="interwiki iw_wp" target="_blank" title="https://en.wikipedia.org/wiki/Reverse_Polish_notation" rel="noopener">Reverse Polish Notation</a> (RPN) and applied in order.  The output is the top-level operand remaining on the stack after applying all operations.
</p>

<p>
The <em>operations</em> array must contain at least one push operator and there must be at least one operand remaining on the stack at the end of the operation sequence, which will be pushed to the target channel.  If the stack contains insufficient entries for a given operator, the results of that operator are undefined.
</p>

<p>
Multiple formulas may output to the same property, and if they do there must be some logic to determine how the results will be accumulated onto the property.  The <em>stage</em> element allows a formula to specify how its <em>output</em> will be combined with other outputs that may target the same property.  The current implementation supports a two-stage combiner.  The outputs for all formulas that specify “multiply” as their stage will be multiplied together and the result multiplied by the sum of the outputs of all formulas that specify “sum” as their stage.
</p>
<pre class="code">output = (sum1+sum2+sum3+...sumN) * multi1 * multi2 * multi3 *...*multiN</pre>

<p>
More stages may be introduced in the future to support more complex combinations of outputs.
</p>

</div>

<h2 id="example">Example</h2>
<div class="level2">
<pre class="code">{
    &quot;output&quot; : &quot;upper_leg:figures/Unimesh#upper_leg?rotation/x&quot;,
    &quot;operations&quot; : [
        { &quot;op&quot; : &quot;push&quot;, &quot;url&quot; : &quot;hips:figures/UniMesh#hips?rotation/x&quot; },
        { &quot;op&quot; : &quot;push&quot;, &quot;url&quot; : &quot;hips:figures/Daphne#DaphneHeadLarge?value&quot; },
        { &quot;op&quot; : &quot;push&quot;, &quot;val&quot; : 1.7 },
        { &quot;op&quot; : &quot;add&quot; },
        { &quot;op&quot; : &quot;mult&quot; },
    &quot;stage&quot; : &quot;multiply&quot;
    ]
}</pre>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <!-- <div class="docInfo"><bdi>public/dson_spec/object_definitions/formula/start.txt</bdi> · Last modified: 2012/05/22 22:40 by <bdi>talltay</bdi></div> -->

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="http://docs.daz3d.com/doku.php/public/dson_spec/object_definitions/formula/start?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="http://docs.daz3d.com/doku.php/public/dson_spec/object_definitions/formula/start?do=export_pdf"  class="action export_pdf" rel="nofollow" title="Export to PDF"><span>Export to PDF</span></a></li><li class="plugin_move_page"><a href=""><span>Rename Page</span></a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by/3.0/" rel="license" class="urlextern" target="_blank">CC Attribution 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by/3.0/" rel="license" target="_blank"><img src="http://docs.daz3d.com/lib/images/license/button/cc.png" alt="CC Attribution 3.0 Unported" /></a>        <a href="http://www.php.net" title="Powered by PHP" target="_blank"><img
            src="http://docs.daz3d.com/lib/tpl/dazdoccenter/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="_blank"><img
            src="http://docs.daz3d.com/lib/tpl/dazdoccenter/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="_blank"><img
            src="http://docs.daz3d.com/lib/tpl/dazdoccenter/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" target="_blank"><img
            src="http://docs.daz3d.com/lib/tpl/dazdoccenter/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="http://docs.daz3d.com/lib/exe/indexer.php?id=public%3Adson_spec%3Aobject_definitions%3Aformula%3Astart&amp;1751359069" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
